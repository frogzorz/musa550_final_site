[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About Me",
    "section": "",
    "text": "Hello there!\n\n\nMy name is Jamie Song, and I took MUSA 550 in Fall 2024 with Professor Eric Delmelle.\nYou can find more information about me on my LinkedIn page.\nI’m also a research and program coordinator at Penn Trauma.\n\nIf you’re interested in injury research and/or epidemiology, please reach out!",
    "crumbs": [
      "About Me"
    ]
  },
  {
    "objectID": "analysis/crash-data-download.html",
    "href": "analysis/crash-data-download.html",
    "title": "Setting up our analysis",
    "section": "",
    "text": "First, we will load our data from the following sources:\nProcessing data for year 2018...\nProcessing data for year 2019...\nProcessing data for year 2020...\nProcessing data for year 2021...\nProcessing data for year 2022...\nProcessing data for year 2023...\nCombined all years into a single DataFrame.\nDeleted: philly_crash_data/Philadelphia_2018.zip\nDeleted: philly_crash_data/CRASH_PHILADELPHIA_2018.csv\nDeleted: philly_crash_data/Philadelphia_2019.zip\nDeleted: philly_crash_data/CRASH_PHILADELPHIA_2019.csv\nDeleted: philly_crash_data/Philadelphia_2020.zip\nDeleted: philly_crash_data/CRASH_PHILADELPHIA_2020.csv\nDeleted: philly_crash_data/Philadelphia_2021.zip\nDeleted: philly_crash_data/CRASH_PHILADELPHIA_2021.csv\nDeleted: philly_crash_data/Philadelphia_2022.zip\nDeleted: philly_crash_data/CRASH_PHILADELPHIA_2022.csv\nDeleted: philly_crash_data/Philadelphia_2023.zip\nDeleted: philly_crash_data/CRASH_PHILADELPHIA_2023.csv\n\n\n/var/folders/xd/w__5x95d37b_lkks4djd2m9h0000gp/T/ipykernel_13343/1287730822.py:40: DtypeWarning: Columns (91,92,95,96,97) have mixed types. Specify dtype option on import or set low_memory=False.\n  df = pd.read_csv(csv_filename)",
    "crumbs": [
      "Project introduction",
      "Setting up our analysis"
    ]
  },
  {
    "objectID": "analysis/crash-data-download.html#visualizing-the-crash-data",
    "href": "analysis/crash-data-download.html#visualizing-the-crash-data",
    "title": "Setting up our analysis",
    "section": "Visualizing the crash data",
    "text": "Visualizing the crash data\n\nCrash point data by year\nNow that we have imported and prepared the crash data, we will quickly visualize them in the following interactive map.\nYears can be toggled on and off to see distributions of crashes across time. Reducing the number of years visualized as well as zooming into the map reduces the relative size of the dots, making it easier to see the spatial distribution of crashes.",
    "crumbs": [
      "Project introduction",
      "Setting up our analysis"
    ]
  },
  {
    "objectID": "analysis/data-processing.html",
    "href": "analysis/data-processing.html",
    "title": "Non-motorist crash risk in Philadelphia",
    "section": "",
    "text": "Now, we will import Philadelphia census tracts to aggregate the crash data and more clearly visualize areas that suffer from more non-motorist crashes.\n/Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages/shapely/set_operations.py:426: RuntimeWarning: invalid value encountered in unary_union\n  return lib.unary_union(collections, **kwargs)\n/Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages/shapely/predicates.py:798: RuntimeWarning: invalid value encountered in intersects\n  return lib.intersects(a, b, **kwargs)\n/Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages/shapely/set_operations.py:340: RuntimeWarning: invalid value encountered in union\n  return lib.union(a, b, **kwargs)\n/Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages/shapely/set_operations.py:340: RuntimeWarning: invalid value encountered in union\n  return lib.union(a, b, **kwargs)\n/var/folders/xd/w__5x95d37b_lkks4djd2m9h0000gp/T/ipykernel_86656/2471641250.py:31: UserWarning: Geometry is in a geographic CRS. Results from 'length' are likely incorrect. Use 'GeoSeries.to_crs()' to re-project geometries to a projected CRS before this operation.\n\n  roads_with_tracts[\"length_km\"] = roads_with_tracts.geometry.length / 1000  # Convert to kilometers\n/Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages/IPython/core/interactiveshell.py:3448: FutureWarning: The `op` parameter is deprecated and will be removed in a future release. Please use the `predicate` parameter instead.\n  if await self.run_code(code, result, async_=asy):\n/var/folders/xd/w__5x95d37b_lkks4djd2m9h0000gp/T/ipykernel_86656/2471641250.py:82: FutureWarning: `use_index` defaults to False but will default to True in future. Set True/False directly to control this behavior and silence this warning\n  w = Queen.from_dataframe(geo_data)\n&lt;folium.features.GeoJson at 0x33f738460&gt;",
    "crumbs": [
      "Project introduction",
      "All crashes by census tract, normalized by land area (sq. km.)"
    ]
  },
  {
    "objectID": "analysis/data-processing.html#further-data-preparation",
    "href": "analysis/data-processing.html#further-data-preparation",
    "title": "Non-motorist crash risk in Philadelphia",
    "section": "Further data preparation",
    "text": "Further data preparation\nWe will process our data further by calcualting the proportion of tertiary and residential roads in each census tract.\nWe will also pull in further data from the ACS 2022 5-year estimates on commuting characteristics and vehicle ownership, as well as economic and racial/ethnic demographics. In detail, they are as follows: - Commuting - Drive alone - Carpool - Public transit - Walking - Biking - Work from home - Vehicle ownership - None - One - Two - Three or more (excluded from analysis) - Economics - Median household income - Poverty rate - Race/ethnicity - White - Black - Hispanic/Latinx - Asian",
    "crumbs": [
      "Project introduction",
      "All crashes by census tract, normalized by land area (sq. km.)"
    ]
  },
  {
    "objectID": "analysis/data-processing.html#summarizing-acs-data",
    "href": "analysis/data-processing.html#summarizing-acs-data",
    "title": "Non-motorist crash risk in Philadelphia",
    "section": "Summarizing ACS data",
    "text": "Summarizing ACS data\nAs with many injury-related phenomena, motor vehicle injuries and non-motorist crashes show disparities in who they affect (NHTSA). We will describe this trend in Philadelphia using the data we pulled from the ACS.\n\nHistograms\nFirst, we will produce a set of histograms to view the distributions of several ACS variables.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWe can see that the racial/ethnic demographic variables as well as many of the commute-related variables do not have apparently normal distributions. To minimize the bias from skewed data, we will calculate median instead of mean for these.\n\n\nSummary table\nThe following table summarizes the ACS variables by quintile of crashes by road length (km) by census tract.\n\n\n\n\n\nquintile_road\nmedian income (mean)\npct white (median)\npct black (median)\npct hispanic (median)\npct asian (median)\npct poverty (mean)\npct drive_alone (median)\npct carpool (median)\npct transit (median)\npct walk (median)\npct bike (median)\n\n\n\n\n1\n71703.79\n59.82\n15.30\n5.35\n3.32\n11.99\n60.75\n6.77\n12.02\n1.01\n0.00\n\n\n2\n55323.21\n27.46\n28.12\n5.87\n2.53\n16.77\n52.47\n6.46\n14.20\n2.16\n0.00\n\n\n3\n59099.29\n25.49\n30.68\n8.17\n3.96\n22.49\n44.64\n6.98\n18.50\n2.52\n0.00\n\n\n4\n47287.19\n10.13\n56.15\n6.64\n3.24\n26.89\n43.46\n5.42\n23.37\n3.48\n0.00\n\n\n5\n49366.47\n22.62\n26.49\n5.40\n4.94\n26.36\n29.14\n2.61\n23.60\n6.43\n1.34\n\n\n\n\n\nTracts in lower quintiles of crashes per road length have higher median incomes, white populations, and rates of commuting to work in cars, while tracts in higher quintiles have lower median incomes, greater Black, Hispanic, and Asian populations, and higher rates of commuting to work by public transit, walking, and biking. This suggests that more marginalized communities bear a greater burden of non-motorist crash injuries.\nHowever, there is an important limitation to consider: the neighborhood characteristics of crash locations are not the same as those of the people injured in the crashes. This limitation is tempered by the fact that we are studying non-motorist crashes; in particular, injured non-motorists are more likely to be from nearby areas by virtue of their slower modes of transportation.",
    "crumbs": [
      "Project introduction",
      "All crashes by census tract, normalized by land area (sq. km.)"
    ]
  },
  {
    "objectID": "analysis/modeling.html",
    "href": "analysis/modeling.html",
    "title": "Building our random forest model",
    "section": "",
    "text": "Now that we have loaded and processed our data, we will proceed to build and test our random forest model.\nRequirement already satisfied: statsmodels in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (0.14.4)\nRequirement already satisfied: numpy&lt;3,&gt;=1.22.3 in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (from statsmodels) (1.26.4)\nRequirement already satisfied: scipy!=1.9.2,&gt;=1.8 in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (from statsmodels) (1.14.1)\nRequirement already satisfied: pandas!=2.1.0,&gt;=1.4 in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (from statsmodels) (1.5.3)\nRequirement already satisfied: patsy&gt;=0.5.6 in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (from statsmodels) (0.5.6)\nRequirement already satisfied: packaging&gt;=21.3 in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (from statsmodels) (24.1)\nRequirement already satisfied: python-dateutil&gt;=2.8.1 in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (from pandas!=2.1.0,&gt;=1.4-&gt;statsmodels) (2.9.0)\nRequirement already satisfied: pytz&gt;=2020.1 in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (from pandas!=2.1.0,&gt;=1.4-&gt;statsmodels) (2024.2)\nRequirement already satisfied: six in /Users/songj/miniforge3/envs/musa-550-fall-2024/lib/python3.10/site-packages (from patsy&gt;=0.5.6-&gt;statsmodels) (1.16.0)\nNote: you may need to restart the kernel to use updated packages.\nFirst, let’s load the data from the previous notebook.",
    "crumbs": [
      "Project introduction",
      "Building our random forest model"
    ]
  },
  {
    "objectID": "analysis/modeling.html#model-design",
    "href": "analysis/modeling.html#model-design",
    "title": "Building our random forest model",
    "section": "Model design",
    "text": "Model design\nBecause the goal of this project is to predict future non-motorist crashes, we need to show how well our model can perform on existing data where we can verify predictions with observed data. Therefore, we will predict 2023 crashes using data from the prior five years - 2018 through 2022.\n\nPreparing the predictors\nAlong with our crash count columns, we select the variables we created that are associated with commuting patterns, vehicle ownership, and road characteristics.\n\nCorrelation matrix\nThe following matrix shows the correlations between the predictor variables. There is likely collinearity in the crash counts and lagged crashes, but we will keep them because we believe they are essential for the model.\n\n\n\n\n\n\n\n\n\n\n\n\nModel setup\nNow, we will proceed to set up the random forest model. We will also add a robust scaler to the model instead of the standard scaler because it uses the median and interquartile range, which are less sensitive to outliers than the mean and standard deviation. We also use GridSearchCV to cross-validate the model and determine a set of optimized parameters.\n\n\nFitting 3 folds for each of 64 candidates, totalling 192 fits\n\n\nGridSearchCV(cv=3,\n             estimator=Pipeline(steps=[('robustscaler', RobustScaler()),\n                                       ('randomforestregressor',\n                                        RandomForestRegressor(random_state=42))]),\n             param_grid={'randomforestregressor__max_depth': [2, 5, 7, 9, 13,\n                                                              21, 33, 51],\n                         'randomforestregressor__n_estimators': [5, 10, 15, 20,\n                                                                 30, 50, 100,\n                                                                 200]},\n             verbose=1)In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.GridSearchCVGridSearchCV(cv=3,\n             estimator=Pipeline(steps=[('robustscaler', RobustScaler()),\n                                       ('randomforestregressor',\n                                        RandomForestRegressor(random_state=42))]),\n             param_grid={'randomforestregressor__max_depth': [2, 5, 7, 9, 13,\n                                                              21, 33, 51],\n                         'randomforestregressor__n_estimators': [5, 10, 15, 20,\n                                                                 30, 50, 100,\n                                                                 200]},\n             verbose=1)estimator: PipelinePipeline(steps=[('robustscaler', RobustScaler()),\n                ('randomforestregressor',\n                 RandomForestRegressor(random_state=42))])RobustScalerRobustScaler()RandomForestRegressorRandomForestRegressor(random_state=42)\n\n\nNow, we will fit and evaluate the random forest model using two metrics: mean absolute error and Poisson deviance. The mean absolute error gives us the error in terms of crashes, while the Poisson deviance is a goodness-of-fit metric for that we calculate mainly to provide a standard of comparison to other models. A lower score indicates a better fit to the Poisson distribution, which is appropriate for count-based events like injuries and crashes.\n\n\nModel Performance\nAverage Absolute Error: 0.8172 crashes\nWe do not report MAPE because of zero values in the observed data\nPoisson Deviance: 0.5216537518327811\n\n\nThe model predictions had a mean absolute error of about 0.8 crashes, which is nowhere close to perfect, but may still be a decent model in comparison to other options. The Poisson deviance is approximately 0.52.\nNow, let’s map the predicted values.\n\n\n\n\n\n\n\n\n\nThe model predicts high crash counts in University City, Kensington, and the Market East/Chinatown section of Center City, as well as along North Broad Street and the western end of Market Street. The large tract encompassing Fairmount Park and parts of West Philadelphia also has a higher number of crashes.\nLet’s now evaluate the model performance by mapping the errors.\n\n\n\n\n\n\n\n\n\nThe map shows that error values are distributed across the city and not clustered in any specific area, other than University City, which has the greatest error magnitude at around -6 crashes. The map also shows that the model did not severely overpredict or underpredict in most tracts.",
    "crumbs": [
      "Project introduction",
      "Building our random forest model"
    ]
  },
  {
    "objectID": "analysis/modeling.html#comparison-with-poisson-regression",
    "href": "analysis/modeling.html#comparison-with-poisson-regression",
    "title": "Building our random forest model",
    "section": "Comparison with Poisson regression",
    "text": "Comparison with Poisson regression\nFor the sake of comparison with a more traditional model that is used for count data, we will run a Poisson regression to predict 2023 crash counts using the same predictor variables as the random forest model.\n\n\nPoisson model performance\nAverage absolute error: 1.5590 crashes\nWe do not report MAPE because of zero values in the observed data\nPoisson Deviance: 1.3527141666894478\n\n\nThe average absolute error was much greater than that of the random forest model, as well as the Poisson deviance. This suggests that the Poisson model underperforms in comparison to the random forest model.\n\n\n\n\n\n\n\n\n\nWe can see that the Poisson model had huge errors when predicting crashes in University City, as well as some tracts in Kensington and Center City. The random forest model also overpredicted in University City, but not nearly to the same extent.\nFrom this comparison, we suggest that predictions of non-motorist crash risk, as well as motor vehicle crash risk in general, can benefit from more advanced machine learning techniques like optimized random forest regression.\nNow, let’s produce predictions for 2024 before wrapping up our analysis.\n\n\n\n\n\n\n\n\n\nThe predictions are quite similar between 2023 and 2024, which is expected because of the four shared years of data between the two predictor datasets.",
    "crumbs": [
      "Project introduction",
      "Building our random forest model"
    ]
  },
  {
    "objectID": "analysis/modeling.html#conclusion",
    "href": "analysis/modeling.html#conclusion",
    "title": "Building our random forest model",
    "section": "Conclusion",
    "text": "Conclusion\nBased on our results, we suggest that random forest modeling techniques are useful for predicting non-motorist crash risk in Philadelphia. Our prediction of non-motorist crash risk shows that University City, Market East, Fairmount Park, North Broad Street, western Market Street, and Kensington should be focus areas for traffic calming and urban design improvements to prevent further vehicular collisions with non-motorists.\nWe also recommend further refinement of the model, using more relevant data and adjusting the number of years of prior crash data to use in the prediction process. The geographic unit may be changed to block groups, fishnet grid cells, or road segments to improve the granularity and precision of the features and model predictions. Further variables to describe the characteristics of the road network, such as speed limits and highway off-ramp locations, may be useful in improving the accuracy of the model.",
    "crumbs": [
      "Project introduction",
      "Building our random forest model"
    ]
  },
  {
    "objectID": "analysis/index.html",
    "href": "analysis/index.html",
    "title": "Project introduction",
    "section": "",
    "text": "Cars dominate daily life in the United States. Most Americans depend on driving to get to work, school, and other everyday activities as the most time-efficient form of transportation available to them. However, motor vehicles have faced criticism as air polluters, contributors to greenhouse gas emissions, and dangers not only to the people in them, but also to the non-motorists sharing the road. In response to the latter concerns, Mayor Jim Kenney signed an executive order in 2016 to undertake Vision Zero, a strategy to eliminate all traffic-related deaths by 2030. (City of Philadelphia)\nIn the past several years, traffic injuries have decreased from a high of over 3 million in 2016 to 2.38 million in 2022. However, traffic fatalities experienced a surge following the onset of the COVID-19 pandemic. (NHTSA) Philadelphia was not an exception to this national trend: traffic fatalities rose from 84 in 2019 to 152 in 2020. (Axios)\n\n\nModern urbanism has focused on human-centered approaches to improving urban life. These include developing walkable and bikeable neighborhoods, which provide health benefits to its residents through incorporating regular exercise into daily routines, as well as reducing vehicular pollution and injury risk. Urban planners sometimes cite Dutch cities like Amsterdam and Utrecht as prime examples of this urbanist ideal, where bicycles and light rail tend to dominate the streets instead of cars. The streets of US cities, on the other hand, are almost all dominated by cars, which is laid bare in their wide streets, car-prioritized intersections, and high speed limits even within densely populated areas.\nWith dangerous streets and high motor vehicle usage rates in the US, the persistence of motor vehicle crash injuries is not surprising. Non-motorists are of special concern - not only because they are more vulnerable to severe injury when colliding with a large motor vehicle, but also because they tend to represent people who cannot afford a car or rideshare. As we will show in our analysis, the areas affected most by non-motorist crashes are disproportionately Black and brown, with lower incomes and higher poverty rates. Injuries to non-motorists also bring up a moral hazard: those who cannot or choose not to use a motor vehicle are still being injured and killed by them. Despite these concerns, non-motorist crashes are understudied in injury epidemiology. This project will aim to address a knowledge gap regarding non-motorist crashes.\n\n\n\n\nTo ensure that we continue to reduce crashes and traffic injuries despite a limited city budget, we must undertake strategic interventions and investments in the areas where crash risk is highest. Prior data show us where crashes have already occurred, but without further modeling, it may be difficult to accurately predict where crashes may occur in the future. Therefore, in this project, we will demonstrate how machine learning can be used to predict non-motorist crash risk in Philadelphia.",
    "crumbs": [
      "Project introduction"
    ]
  },
  {
    "objectID": "analysis/index.html#motor-vehicle-injuries-in-philadelphia",
    "href": "analysis/index.html#motor-vehicle-injuries-in-philadelphia",
    "title": "Project introduction",
    "section": "",
    "text": "Cars dominate daily life in the United States. Most Americans depend on driving to get to work, school, and other everyday activities as the most time-efficient form of transportation available to them. However, motor vehicles have faced criticism as air polluters, contributors to greenhouse gas emissions, and dangers not only to the people in them, but also to the non-motorists sharing the road. In response to the latter concerns, Mayor Jim Kenney signed an executive order in 2016 to undertake Vision Zero, a strategy to eliminate all traffic-related deaths by 2030. (City of Philadelphia)\nIn the past several years, traffic injuries have decreased from a high of over 3 million in 2016 to 2.38 million in 2022. However, traffic fatalities experienced a surge following the onset of the COVID-19 pandemic. (NHTSA) Philadelphia was not an exception to this national trend: traffic fatalities rose from 84 in 2019 to 152 in 2020. (Axios)\n\n\nModern urbanism has focused on human-centered approaches to improving urban life. These include developing walkable and bikeable neighborhoods, which provide health benefits to its residents through incorporating regular exercise into daily routines, as well as reducing vehicular pollution and injury risk. Urban planners sometimes cite Dutch cities like Amsterdam and Utrecht as prime examples of this urbanist ideal, where bicycles and light rail tend to dominate the streets instead of cars. The streets of US cities, on the other hand, are almost all dominated by cars, which is laid bare in their wide streets, car-prioritized intersections, and high speed limits even within densely populated areas.\nWith dangerous streets and high motor vehicle usage rates in the US, the persistence of motor vehicle crash injuries is not surprising. Non-motorists are of special concern - not only because they are more vulnerable to severe injury when colliding with a large motor vehicle, but also because they tend to represent people who cannot afford a car or rideshare. As we will show in our analysis, the areas affected most by non-motorist crashes are disproportionately Black and brown, with lower incomes and higher poverty rates. Injuries to non-motorists also bring up a moral hazard: those who cannot or choose not to use a motor vehicle are still being injured and killed by them. Despite these concerns, non-motorist crashes are understudied in injury epidemiology. This project will aim to address a knowledge gap regarding non-motorist crashes.",
    "crumbs": [
      "Project introduction"
    ]
  },
  {
    "objectID": "analysis/index.html#modeling-to-inform-strategic-interventions",
    "href": "analysis/index.html#modeling-to-inform-strategic-interventions",
    "title": "Project introduction",
    "section": "",
    "text": "To ensure that we continue to reduce crashes and traffic injuries despite a limited city budget, we must undertake strategic interventions and investments in the areas where crash risk is highest. Prior data show us where crashes have already occurred, but without further modeling, it may be difficult to accurately predict where crashes may occur in the future. Therefore, in this project, we will demonstrate how machine learning can be used to predict non-motorist crash risk in Philadelphia.",
    "crumbs": [
      "Project introduction"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Non-motorist crash risk in Philadelphia",
    "section": "",
    "text": "Welcome to my MUSA 550 final project!\n\nThis project was created as part of Professor Eric Delmelle’s MUSA 550 Geospatial Data Science course at the University of Pennsylvania in the Fall of 2024.\n\n\nPlease use the sidebar to navigate across different sections of this project.",
    "crumbs": [
      "Welcome"
    ]
  }
]